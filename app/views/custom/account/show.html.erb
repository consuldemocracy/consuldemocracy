<div class="row account">
  <div class="small-12 column">
    <div class="float-right text-right">
      <%= link_to t("account.show.change_credentials_link"), edit_user_registration_path, class: "button hollow" %>
      <br>
      <%= link_to t("account.show.erase_account_link"), users_registrations_delete_form_path, class: "delete" %>
    </div>

    <%= avatar_image(@account, seed: @account.id, size: 100, class: "margin-bottom") %>

    <h1 class="inline-block"><%= t("account.show.title") %></h1>

    <%= form_for @account, as: :account, url: account_path do |f| %>
      <%= render "shared/errors", resource: @account %>

      <div class="row">
        <div class="small-12 medium-7 column">

          <h2><%= t("account.show.personal")%></h2>

          <div class="small-12 medium-10">
            <% if @account.organization? %>
              <%= f.fields_for :organization do |fo| %>
                <%= fo.text_field :name, autofocus: true, maxlength: Organization.name_max_length, placeholder: t("account.show.organization_name_label") %>
                <%= fo.text_field :responsible_name, autofocus: true, maxlength: Organization.responsible_name_max_length, placeholder: t("account.show.organization_responsible_name_placeholder") %>
              <% end %>
              <%= f.text_field :phone_number, placeholder: t("account.show.phone_number_label") %>

            <% else %>
              <%= f.text_field :lastname %>
              <%= f.text_field :firstname %>
              <%= f.text_field :username, maxlength: User.username_max_length, placeholder: t("account.show.username_label") %>

               <div class="date-of-birth">
                <%= f.label t("devise_views.users.registrations.new.date_of_birth") %>
                <p class="help-text" id="date-of-birth-help-text"><%= t("devise_views.users.registrations.new.date_of_birth_note") %></p>
                <%= f.date_select :date_of_birth,
                                  prompt: true,
                                  start_year: 26.years.ago.year, end_year: 16.years.ago.year,
                                  label: false,
                                  aria: {describedby: "date-of-birth-help-text"} %>
              </div>
              <div class="gender">
                <%= f.select :gender, user_genders_select_options, label: t("devise_views.users.registrations.new.gender_label"), prompt: t("devise_views.users.registrations.new.gender_placeholder") %>
              </div>

            <!-- Address -->

            <%= f.text_field :address %>

            <div class="medium-6">
              <%= f.text_field :postal_code %>
            </div>

            <%= f.text_field :city %>

            <!-- Connexion info -->

            <%= f.text_field  :phone_number,  placeholder: t("devise_views.organizations.registrations.new.phone_number_label") %>

            <% end %>
          </div>

          <div>
            <%= f.label :public_activity do %>
              <%= f.check_box :public_activity, title: t('account.show.public_activity_label'), label: false %>
              <span class="checkbox">
                <%= t("account.show.public_activity_label") %>
              </span>
            <% end %>
          </div>

          <div>
            <%= f.label :public_interests do %>
              <%= f.check_box :public_interests, title: t('account.show.public_interests_label'), label: false %>
              <span class="checkbox">
                <%= t("account.show.public_interests_label") %>
              </span>
            <% end %>
          </div>


          <% if @account.email.present? %>
            <h2><%= t("account.show.notifications")%></h2>

            <div>
              <%= f.label :email_on_comment do %>
                <%= f.check_box :email_on_comment, title: t('account.show.email_on_comment_label'), label: false %>
                <span class="checkbox">
                  <%= t("account.show.email_on_comment_label") %>
                </span>
              <% end %>
            </div>

            <div>
              <%= f.label :email_on_comment_reply do %>
                <%= f.check_box :email_on_comment_reply, title: t('account.show.email_on_comment_reply_label'), label: false %>
                <span class="checkbox">
                  <%= t("account.show.email_on_comment_reply_label") %>
                </span>
              <% end %>
            </div>

            <div>
              <%= f.label :email_newsletter_subscribed do %>
                <%= f.check_box :newsletter, title: t('account.show.subscription_to_website_newsletter_label'), label: false %>
                <span class="checkbox">
                  <%= t("account.show.subscription_to_website_newsletter_label") %>
                </span>
              <% end %>
            </div>

            <div>
              <%= f.label :email_digest do %>
                <%= f.check_box :email_digest, title: t('account.show.email_digest_label'), label: false %>
                <span class="checkbox">
                  <%= t("account.show.email_digest_label") %>
                </span>
              <% end %>
            </div>

            <div>
              <%= f.label :email_on_direct_message do %>
                <%= f.check_box :email_on_direct_message, title: t('account.show.email_on_direct_message_label'), label: false %>
                <span class="checkbox">
                  <%= t("account.show.email_on_direct_message_label") %>
                </span>
              <% end %>
            </div>
          <% end %>

          <% if @account.official_level == 1 %>
            <div>
              <%= f.label :official_position_badge do %>
                <%= f.check_box :official_position_badge,
                                 title: t('account.show.official_position_badge_label'),
                                 label: false %>
                <span class="checkbox">
                  <%= t("account.show.official_position_badge_label") %>
                </span>
              <% end %>
            </div>
          <% end %>

          <%= f.submit t("account.show.save_changes_submit"), class: "button margin-top" %>
        </div>

        <div class="user-permissions small-12 medium-5 column">
          <h2><%= t("account.show.user_permission_title") %></h2>

          <p><%= t("account.show.user_permission_info") %></p>

          <ul>
            <li><span class="icon-check"></span>&nbsp;<%= t("account.show.user_permission_debates") %></li>
            <li><span class="icon-check"></span>&nbsp;<%= t("account.show.user_permission_proposal") %></li>
            <li>
              <% if current_user.level_two_or_three_verified? %>
                <span class="icon-check"></span>
              <% else %>
                <span class="icon-x"></span>
              <% end %>
              <%= t("account.show.user_permission_support_proposal") %>
            </li>
            <li>
              <% if current_user.level_three_verified? %>
                <span class="icon-check"></span>
              <% else %>
                <span class="icon-x"></span>
              <% end %>
              <%= t("account.show.user_permission_votes") %>
            </li>
          </ul>

          <p>
            <span><%= t("account.show.user_permission_verify_info") %></span>
          </p>
          <p>
            <%= t("account.show.user_permission_verify") %>
          </p>

          <% unless @account.organization? %>
            <div>
              <span class="verify-account">
                <% if current_user.level_three_verified? %>
                  <p class="already-verified">
                    <span class="icon-check"></span>
                    <%= t("account.show.verified_account") %>
                  </p>
                <% elsif current_user.level_two_verified? %>
                  <%= link_to t("account.show.finish_verification"), verification_path, class: "button success" %>
                <% else %>
                  <%= link_to t("account.show.verify_my_account"), verification_path, class: "button success" %>
                <% end %>
              </span>
            </div>
          <% end %>

          <!-- Connexion reseaux sociaux -->
          <% if feature?(:twitter_login) || feature?(:facebook_login) || feature?(:google_login) %>
            <h2><%= t("account.show.social_networks")%></h2>

            <% if feature? :facebook_login %>
            <div class="small-12 medium-6 column end">
              <% if auth = current_user.identities.find_by(provider: :facebook) %>
                <%= link_to "DÃ©lier", remove_provider_account_path(auth), method: :delete,
                            title: t("account.show.remove_provider", kind: "Facebook"),
                            class: "button-facebook button expanded" %>
              <% else %>
                <%= link_to "Lier", user_omniauth_authorize_path(:facebook),
                          title: t("account.show.add_provider", kind: "Facebook"),
                          class: "button-facebook button expanded" %>
              <% end %>
            </div>
          <% end %>


          <% end %>
        </div>
      </div>
    <% end %>

  </div>
</div>
