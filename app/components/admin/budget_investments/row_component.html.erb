<tr id="<%= dom_id(investment) %>" class="budget_investment">
  <td class="text-right" data-field="id">
    <strong><%= investment.id %></strong>
  </td>

  <td data-field="title">
    <%= link_to investment.title, investment_path, target: "_blank" %>
  </td>

  <td data-field="supports">
    <%= investment.total_votes %>
  </td>

  <td data-field="admin">
    <%= administrator_info %>
  </td>

  <td data-field="author">
    <%= investment.author.name %>
  </td>

  <td data-field="valuator">
    <%= valuators_info %>
  </td>

  <td data-field="geozone">
    <%= investment.heading.name %>
  </td>

  <td data-field="feasibility">
    <%= t("admin.budget_investments.index.feasibility.#{investment.feasibility}") %>
  </td>

  <% if budget.show_money? %>
    <td data-field="price">
      <%= investment.formatted_price %>
    </td>
  <% end %>

  <td data-field="valuation_finished">
    <%= investment.valuation_finished? ? t("shared.yes") : t("shared.no") %>
  </td>

  <td data-field="visible_to_valuators">
    <% if can?(:admin_update, investment) %>
      <%= form_for [:admin, budget, investment], remote: true, format: :json do |f| %>
          <%= f.check_box :visible_to_valuators,
                          label: false,
                          class: "js-submit-on-change",
                          id: "budget_investment_visible_to_valuators" %>
      <% end %>
    <% else %>
      <%= investment.visible_to_valuators? ? t("shared.yes") : t("shared.no") %>
    <% end %>
  </td>

  <td id="selection" data-field="selected">
    <% if investment.selected? %>
        <%= link_to_if can?(:toggle_selection, investment),
                       t("admin.budget_investments.index.selected"),
                       toggle_selection_admin_budget_budget_investment_path(
                         budget,
                         investment,
                         filter: params[:filter],
                         sort_by: params[:sort_by],
                         min_total_supports: params[:min_total_supports],
                         max_total_supports: params[:max_total_supports],
                         advanced_filters: params[:advanced_filters],
                         page: params[:page]
                       ),
                       method: :patch,
                       remote: true,
                       class: "button small expanded" %>
    <% elsif investment.feasible? && investment.valuation_finished? %>
      <% if can?(:toggle_selection, investment) %>
        <%= link_to t("admin.budget_investments.index.select"),
                    toggle_selection_admin_budget_budget_investment_path(
                      budget,
                      investment,
                      filter: params[:filter],
                      sort_by: params[:sort_by],
                      min_total_supports: params[:min_total_supports],
                      max_total_supports: params[:max_total_supports],
                      advanced_filters: params[:advanced_filters],
                      page: params[:page]
                    ),
                    method: :patch,
                    remote: true,
                    class: "button small hollow expanded" %>
      <% end %>
    <% end %>
  </td>

  <% if params[:advanced_filters]&.include?("selected") %>
    <td data-field="incompatible">
      <%= investment.incompatible? ? t("shared.yes") : t("shared.no") %>
    </td>
  <% end %>
</tr>
